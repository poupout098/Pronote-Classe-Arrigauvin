<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Mini Pronote ++</title>

<style>
body{
  font-family:Segoe UI,Arial,sans-serif;
  background:#f4f6f9;
  margin:0;
}
.nav{
  display:flex;
  justify-content:center;
  gap:20px;
  background:#003366;
  padding:15px;
}
.nav button{
  background:white;
  color:#003366;
  border:none;
  padding:10px 18px;
  border-radius:8px;
  font-weight:600;
}
.login,.main,.admin,.appel{
  background:white;
  max-width:1000px;
  margin:40px auto;
  padding:30px;
  border-radius:12px;
  box-shadow:0 10px 25px rgba(0,0,0,.1);
}
.section{
  background:#f9fafb;
  padding:20px;
  margin:20px 0;
  border-left:6px solid #0066cc;
  border-radius:10px;
}
h2,h3{text-align:center;color:#003366}
input,textarea,select{
  width:100%;
  padding:10px;
  margin:8px 0;
  border-radius:6px;
  border:1px solid #ccc;
}
button{
  background:#0066cc;
  color:white;
  border:none;
  padding:8px 14px;
  border-radius:8px;
  cursor:pointer;
}
button.delete{background:#cc0000;margin-left:10px}
.info{
  background:#eef3ff;
  padding:10px;
  border-radius:8px;
  font-weight:600;
  text-align:center;
  margin-bottom:15px;
}
</style>
</head>

<body>

<!-- NAV -->
<div class="nav" id="nav" style="display:none">
  <button onclick="show('eleve')">ğŸ“˜ Accueil</button>
  <button onclick="show('appel')">ğŸ“’ Vie scolaire</button>
  <button onclick="logout()">ğŸšª DÃ©connexion</button>
</div>

<!-- LOGIN -->
<div class="login" id="login">
  <h2>Connexion Pronote ++</h2>
  <input id="user" placeholder="Utilisateur">
  <input id="pass" type="password" placeholder="Mot de passe">
  <button onclick="login()">Se connecter</button>
  <p id="err" style="color:red"></p>
</div>

<!-- ELEVE -->
<div class="main" id="eleve" style="display:none">
  <h2 id="nomEleve"></h2>

  <div class="section"><h3>ğŸ“Š Notes</h3><ul id="notes"></ul></div>
  <div class="section"><h3>ğŸ« Vie scolaire</h3><p id="vie"></p></div>
  <div class="section"><h3>ğŸ“š Devoirs</h3><ul id="devoirs"></ul></div>
  <div class="section"><h3>ğŸ“‹ Appels</h3><ul id="appels"></ul></div>
  <div class="section"><h3>ğŸ“’ Carnet disciplinaire</h3><ul id="carnetEleve"></ul></div>
  <div class="section"><h3>ğŸ•’ Emploi du temps</h3><pre id="edt"></pre></div>
</div>

<!-- APPEL ELEVE -->
<div class="appel" id="appel" style="display:none">
  <div class="info">ğŸ”’ Lecture seule pour les Ã©lÃ¨ves</div>
</div>

<!-- ADMIN -->
<div class="admin" id="admin" style="display:none">
  <h2>âš™ï¸ Administration</h2>
  <select id="selectEleve" onchange="loadAdmin()"></select>

  <div class="section">
    <h3>ğŸ« Vie scolaire</h3>
    <textarea id="adminVie"></textarea>
  </div>

  <div class="section">
    <h3>ğŸ“š Devoirs</h3>
    <input id="newDevoir" placeholder="Ex : Maths p.34">
    <button onclick="addDevoir()">Ajouter</button>
    <ul id="adminDevoirs"></ul>
  </div>

  <div class="section">
    <h3>ğŸ“‹ Appel</h3>
    <input type="date" id="appelDate">
    <select id="appelStatut">
      <option>PrÃ©sent</option>
      <option>Absent</option>
      <option>Retard</option>
    </select>
    <button onclick="addAppel()">Valider</button>
    <ul id="adminAppels"></ul>
  </div>

  <div class="section">
    <h3>ğŸ“’ Carnet disciplinaire</h3>
    <input type="date" id="carDate">
    <select id="carType">
      <option>Travail non fait</option>
      <option>Oubli de matÃ©riel</option>
      <option>Retard</option>
      <option>Comportement</option>
    </select>
    <input id="carCom" placeholder="Commentaire">
    <button onclick="addCarnet()">Ajouter</button>
    <ul id="adminCarnet"></ul>
  </div>

  <div class="section">
    <h3>ğŸ•’ Emploi du temps</h3>
    <textarea id="adminEDT"></textarea>
  </div>
</div>

<script>
const users=[
  {u:"gustav",p:"2019",n:"Gustav"},
  {u:"julia",p:"2016",n:"Julia"}
];
let logged=null;

function def(){
  return{notes:[],vie:"",devoirs:[],appel:[],carnet:[],edt:""};
}
function get(u){return JSON.parse(localStorage.getItem(u))||def();}
function set(u,d){localStorage.setItem(u,JSON.stringify(d));}

function login(){
  if(user.value==="admin"&&pass.value==="admin123"){
    logged="admin";
    nav.style.display="flex";
    login.style.display="none";
    admin.style.display="block";
    users.forEach(e=>{
      let o=document.createElement("option");
      o.value=e.u;o.text=e.n;selectEleve.appendChild(o);
    });
    loadAdmin();return;
  }
  const e=users.find(x=>x.u===user.value&&x.p===pass.value);
  if(!e){err.innerText="Identifiants incorrects";return;}
  logged=e.u;
  nav.style.display="flex";
  login.style.display="none";
  eleve.style.display="block";
  nomEleve.innerText="Bienvenue "+e.n;
  loadEleve();
}

function logout(){location.reload();}
function show(id){
  eleve.style.display=id==="eleve"?"block":"none";
  appel.style.display=id==="appel"?"block":"none";
}

function loadEleve(){
  const d=get(logged);
  notes.innerHTML=d.notes.map(n=>`<li>${n}</li>`).join("");
  vie.innerText=d.vie;
  devoirs.innerHTML=d.devoirs.map(x=>`<li>${x}</li>`).join("");
  appels.innerHTML=d.appel.map(a=>`<li>${a.date} : ${a.statut}</li>`).join("");
  carnetEleve.innerHTML=d.carnet.map(c=>`<li>${c.date} â€“ ${c.type} (${c.com})</li>`).join("");
  edt.innerText=d.edt;
}

function loadAdmin(){
  const u=selectEleve.value,d=get(u);
  adminVie.value=d.vie;
  adminDevoirs.innerHTML=d.devoirs.map((x,i)=>`<li>${x}<button class="delete" onclick="delDevoir(${i})">X</button></li>`).join("");
  adminAppels.innerHTML=d.appel.map(a=>`<li>${a.date} : ${a.statut}</li>`).join("");
  adminCarnet.innerHTML=d.carnet.map((c,i)=>`<li>${c.date} â€“ ${c.type} (${c.com})<button class="delete" onclick="delCarnet(${i})">X</button></li>`).join("");
  adminEDT.value=d.edt;
}

adminVie?.addEventListener("input",()=>{
  const u=selectEleve.value,d=get(u);
  d.vie=adminVie.value;set(u,d);
});
adminEDT?.addEventListener("input",()=>{
  const u=selectEleve.value,d=get(u);
  d.edt=adminEDT.value;set(u,d);
});

function addDevoir(){
  const u=selectEleve.value,d=get(u);
  if(!newDevoir.value.trim())return;
  d.devoirs.push(newDevoir.value);set(u,d);
  newDevoir.value="";loadAdmin();
}
function delDevoir(i){
  const u=selectEleve.value,d=get(u);
  d.devoirs.splice(i,1);set(u,d);loadAdmin();
}

function addAppel(){
  const u=selectEleve.value,d=get(u);
  if(!appelDate.value)return alert("Date requise");
  d.appel.push({date:appelDate.value,statut:appelStatut.value});
  set(u,d);loadAdmin();
}

function addCarnet(){
  const u=selectEleve.value,d=get(u);
  if(!carDate.value)return alert("Date requise");
  d.carnet.push({date:carDate.value,type:carType.value,com:carCom.value});
  set(u,d);carCom.value="";loadAdmin();
}
function delCarnet(i){
  const u=selectEleve.value,d=get(u);
  d.carnet.splice(i,1);set(u,d);loadAdmin();
}
</script>

</body>
</html>

